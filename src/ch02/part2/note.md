[toc]

# Note

## 2.2.16

自然归并是归并排序的变种，区别于按照1，2，4，8的大小合并相邻区间，自然归并每次选择两个已经有序的相邻子区间，它们可能长度不等，然后合并起来，重复上述操作，直到找不到两个子区间可以合并

观察上面的描述，我们需要注意的地方是

1. 如何找到两个相邻有序的子区间

   ——迭代遍历即可

2. 何时结束合并

   ——需要注意的是，我们在合并完一趟之后，要再检查一遍区间中是否还有可以合并的两个子区间，直到确认没有了，我们才可以退出合并

只要注意上面两个地方，代码不是很难写

## 2.2.17

要求我们在链表上完成自然归并

我们还是需要找到两个子区间，区别于数组，我们要考虑指针的处理。当我们找到两个链表的时候，标记它们的结点为`[left,middle]`和`[middle+1,right]`，同时我们记`right_next = right.next`

那么合并之后一共有两种情况

1. middle结点是合并后的最后一个结点，那么我们需要让middle指向`right_next`
2. right结点是合并后的最后一个结点，那么我们不需要特殊处理

由此我们合并两个区间，得到一条升序的链表，然后这条链表还和剩下的未排序节点保持连续，我们重置`left`作为合并后的首结点，然后继续重复合并过程，直到整条链表有序

有序的判断条件是`left == first && middle == last`，此时我们就不需要继续合并了

---



